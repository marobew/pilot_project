{%extends "base.html" %}

{% block content%}

<main id="main">

    <!-- ======= Works Section ======= -->
    <section class="section site-portfolio">
        <div class="container">
            <div class="row mb-5 align-items-center">
                <!-- ìƒë‹¨ -->
                <div class="col-md-12 col-lg-5 mb-3 mb-lg-0" data-aos="fade-up">
                    <h2>ì•ˆë…•í•˜ì„¸ìš”, {{current_user.username}} ë‹˜!ğŸ˜€</h2>
                </div>
                <!-- // ìƒë‹¨ -->

                <!-- ê¸€ì“°ê¸° -->
                <div class="col-md-12 col-lg-7 text-right text-lg-right" data-aos="fade-up" data-aos-delay="100">
                    <div class="filters">
                        {% if current_user.is_authenticated %}
                        <a href="{{ url_for('logout') }}">ë¡œê·¸ì•„ì›ƒ</a>
                        <a href="{{ url_for('mypage') }}">ë§ˆì´í˜ì´ì§€</a>
                        <a href="{{ url_for('add') }}" class="active">ê¸€ì“°ê¸°</a>
                        {% endif %}
                    </div>
                </div>
                <!-- //ê¸€ì“°ê¸° -->
            </div>

            <div class="post-box row">
                <!-- ë­í‚¹ -->
                <div class="col-md-4">
                    <h4 class="inline mb-2 post-title">ë‚´ ì •ë³´</h4>
                    <div class="card profile mb-4">
                        {% if current_user.is_authenticated %}
                        <h4 class="h4 mb-4">ì´ë¦„ | {{current_user.username}}</h4>
                        <h4 class="h4 mb-4">ì´ë©”ì¼ | {{current_user.email}}</h4>
                        <h4 class="h4 mb-4">level | {{current_user.level}} (ì”¨ì•—)</h4>
                        <h4 class="h4 mb-4">point | {{current_user.point}}ì  (ë‹¤ìŒ ë ˆë²¨ê¹Œì§€
                            {{100 - current_user.point % 100}}ì )
                        </h4>

                        <div class="progress custom-progress">
                            {% if current_user.point >= 100 %}
                            <div class="progress-bar" role="progressbar" style="width: {{current_user.point - 100}}%"
                                aria-valuenow="{{current_user.point - 100}}" aria-valuemin="0" aria-valuemax="100">
                            </div>
                            {% else %}
                            <div class="progress-bar" role="progressbar" style="width: {{current_user.point}}%"
                                aria-valuenow="{{current_user.point}}" aria-valuemin="0" aria-valuemax="100"></div>
                            {% endif %}
                        </div>
                        {% endif %}
                    </div>
                </div>
                <div class="col-md-8">
                    <h4 class="inline mb-2 post-title">ë­í‚¹</h4>
                    <div class="card profile">
                        <div class="col">
                            <h4 class="h4 mb-3">1ë“± | ooo</h4>
                            <div class="progress custom-progress inline-block mb-3">
                                <div class="progress-bar" role="progressbar" style="width: 30%" aria-valuenow="30"
                                    aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <h4 class="h4 mb-3">2ë“± | ooo</h4>
                            <div class="progress custom-progress inline-block mb-3">
                                <div class="progress-bar" role="progressbar" style="width: 30%" aria-valuenow="30"
                                    aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <h4 class="h4 mb-3">3ë“± | ooo</h4>
                            <div class="progress custom-progress inline-block mb-3">
                                <div class="progress-bar" role="progressbar" style="width: 30%" aria-valuenow="30"
                                    aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- //ë­í‚¹ -->
                {% for post in posts.items %}
                <div class="rgyPostIt col-sm-6 col-md-4 col-lg-4 mb-2">
                    <a href="">
                        <p>To. {{ post.receiver }}</p>
                        <p>{{ post.content }}</p>
                        <p>From. {{ post.author.username }}</p>
                        <p style="text-align: right;">{{ post.posted_at.strftime('%Y-%m-%d') }}</p>
                    </a>
                </div>
                {% endfor %}
            </div>
            <!-- í˜ì´ì§•ì²˜ë¦¬ ì‹œì‘ -->
            <ul class="pagination justify-content-center mt-4">
                <!-- ì´ì „í˜ì´ì§€ -->
                {% if posts.has_prev %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ posts.prev_num }}">ì´ì „</a>
                </li>
                {% else %}
                <li class="page-item disabled">
                    <a class="page-link" tabindex="-1" aria-disabled="true" href="#">ì´ì „</a>
                </li>
                {% endif %}
                {% for post in posts.iter_pages() %}
                {% if post %}
                {% if post != post.page %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ post }}">{{ post }}</a>
                </li>
                {% else %}
                <li class="page-item active" aria-current="page">
                    <a class="page-link" href="#">{{ post }}</a>
                </li>
                {% endif %}
                {% else %}
                <li class="disabled">
                    <a class="page-link" href="#">...</a>
                </li>
                {% endif %}
                {% endfor %}
                <!-- ë‹¤ìŒí˜ì´ì§€ -->
                {% if posts.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ posts.next_num }}">ë‹¤ìŒ</a>
                </li>
                {% else %}
                <li class="page-item disabled">
                    <a class="page-link" tabindex="-1" aria-disabled="true" href="#">ë‹¤ìŒ</a>
                </li>
                {% endif %}
            </ul>
            <!-- í˜ì´ì§•ì²˜ë¦¬ ë -->
        </div>
    </section><!-- End  Works Section -->

</main>

{% endblock %}